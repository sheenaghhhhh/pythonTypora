# 22 锁机制

```python
# 【一】什么是锁机制
# ● 我们可以通过一个很简单的比喻来理解事务的锁机制。
# ● 比如同一个办公室的同事们
#   ○ 都想使用打印机打印文件
#     ■ 如果不加以控制
#     ■ 可能出现两个人同时打印不同的内容在一个文件里
#     ■ 就会引起内容混乱。
#   ○ 于是，我们就引入了锁的概念
#     ■ 当有并发的多个事务同时操作同一份数据时
#     ■ 只有“抢到”了锁的事务
#     ■ 才能真正去操作数据
#     ■ 使得数据的安全性得到保证。
# 【二】为什么要用锁机制
# ● 锁保证并发的多个事务同一时间只有一个能运行
#   ○ 会一定程度上降低程序的运行效率
#   ○ 但是能大大提升数据的安全性。

# 【三】数据库锁的分类
# 1.按粒度分
# 行级锁 ： 一个事务操作一条数据的时候其他事务没办法操作当前行
# 表级锁 ： 一个事务操作一条数据的时候直接对整张表加锁
# 页级锁

# 2.按级别分
# 共享锁 ： 如果事务T对数据A加上共享锁后   则其他事务只能对A再加共享锁或不加锁（在其他事务里一定不能再加排他锁  但是在事务T自己里面是可以加的）
# 排他锁 ： 排他锁又被称作互斥锁，写锁，x锁

# 3.使用方式
# 乐观锁 ： 在操作数据的时候以一种乐观的心态看待数据
# 悲观锁 ： 在操作数据的时候以一种悲观的心态看待数据
```

